---
const base = import.meta.env.BASE_URL;
---

<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>{Astro.props.title}</title>
  </head>

  <body>
    <header class="site-header">
      <a href={`${base}`} class="logo">結城の箱庭</a>

      <button class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <nav class="mobile-menu" id="mobileMenu">
        <a href={`${import.meta.env.BASE_URL}`}>トップ</a>
        <a href={`${import.meta.env.BASE_URL}characters/`}>キャラ一覧</a>
        <a href={`${import.meta.env.BASE_URL}about/`}>当サイトについて</a>

      </nav>
    </header>

    <div class="menu-overlay" id="menuOverlay"></div>

    <main>
      <slot />
    </main>

    <script type="module">
      document.addEventListener("DOMContentLoaded", () => {
        const hamburger = document.getElementById("hamburger");
        const menu = document.getElementById("mobileMenu");
        const overlay = document.getElementById("menuOverlay");

        if (!hamburger || !menu || !overlay) return;

        const closeMenu = () => {
          hamburger.classList.remove("open");
          menu.classList.remove("open");
          overlay.classList.remove("open");
          document.body.classList.remove("menu-open");
        };

        const toggleMenu = () => {
          if (menu.classList.contains("open")) {
            closeMenu();
          } else {
            hamburger.classList.add("open");
            menu.classList.add("open");
            overlay.classList.add("open");
            document.body.classList.add("menu-open");
          }
        };

        hamburger.addEventListener("click", toggleMenu);
        overlay.addEventListener("click", closeMenu);
        menu.querySelectorAll("a").forEach((a) =>
          a.addEventListener("click", closeMenu)
        );
      });
    </script>
  </body>
</html>
